var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,n,l)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[n]=l,s=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&i(e,n,t[n]);if(l)for(var n of l(t))a.call(t,n)&&i(e,n,t[n]);return e},c=(e,l)=>t(e,n(l)),r=(e,t,n)=>new Promise(((l,o)=>{var a=e=>{try{s(n.next(e))}catch(t){o(t)}},i=e=>{try{s(n.throw(e))}catch(t){o(t)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,i);s((n=n.apply(e,t)).next())}));import{_ as u}from"./Icon.6be87540.js";import{i as d,p,G as f,v as g,r as m,q as v,ar as b,I as h,a2 as y,t as C,u as k,R as S,V as x,W as E,X as w,ao as P,Y as R,aF as N,bn as O,aJ as _,aK as z,aL as L,aq as D,aP as T,bN as I,bT as j,y as F,aH as V,bC as A,bE as $,a$ as U,bK as M,bL as B,ah as H,bU as W,o as q,w as K,s as X,bV as Y,a9 as J,a7 as Z,a8 as G,as as Q,ap as ee,Z as te,aS as ne,bs as le,bW as oe,N as ae,aa as ie,ab as se,ac as ce,ad as re,b6 as ue,aC as de,bX as pe,bY as fe,bZ as ge,b_ as me,a6 as ve,b$ as be}from"./vendor.07696a3b.js";import{d as he,C as ye}from"./vuedraggable.6f574e51.js";import{m as Ce,x as ke,F as Se,E as xe,B as Ee,p as we,M as Pe,b as Re}from"./index.5eb97f6e.js";import{u as Ne,_ as Oe}from"./useWindowSizeFn.12b67c52.js";import{p as _e}from"./propTypes.eec1be73.js";import{c as ze,g as Le}from"./componentSetting.58af93ba.js";const De=Symbol("s-table");function Te(){return d(De)}const Ie=f({name:"ColumnSetting",components:{Draggable:he},setup(){const e=Te(),t=g([]),n=g([]),l=m({selection:!1,checkAll:!0,checkList:[],defaultCheckList:[]}),o=v((()=>l.selection));function a(t){e.setColumns(t)}function i(){let t=[];return e.getColumns().forEach((e=>{t.push(s({},e))})),t}return b((()=>{e.getColumns().length&&function(){const e=i(),o=e.map((e=>e.key));l.checkList=o,l.defaultCheckList=o;const a=e.filter((e=>"action"!=e.key&&"操作"!=e.title));t.value.length||(t.value=y(a),n.value=y(a))}()})),c(s({},h(l)),{columnsList:t,onChange:function(e){l.selection&&e.unshift("selection"),a(e)},onCheckAll:function(t){let n=e.getCacheColumns(!0);t?(a(n),l.checkList=n):(a([]),l.checkList=[])},onSelection:function(t){let n=e.getCacheColumns();t?(n.unshift({type:"selection",key:"selection"}),a(n)):(n.splice(0,1),a(n))},resetColumns:function(){l.checkList=[...l.defaultCheckList],l.checkAll=!0;let n=e.getCacheColumns().map((e=>c(s({},e),{fixed:void 0})));a(n),t.value=n},fixedColumn:function(n,l){let o=i();const s=n.fixed===l?void 0:l;let c=o.findIndex((e=>e.key===n.key));-1!==c&&(o[c].fixed=s),e.setCacheColumnsField(n.key,{fixed:s}),t.value[c].fixed=s,a(o)},draggableEnd:function(){const e=C(k(t));t.value=e,a(e)},getSelection:o})}}),je={class:"cursor-pointer table-toolbar-right-icon"},Fe={class:"table-toolbar-inner-popover-title"},Ve=N("列展示"),Ae=N("勾选列"),$e=N("重置"),Ue={class:"table-toolbar-inner"},Me={class:"table-toolbar-inner-checkbox"},Be={class:"drag-icon"},He={class:"fixed-item"},We=P("span",null,"固定到左侧",-1),qe=P("span",null,"固定到右侧",-1),Ke=P("span",null,"列设置",-1);var Xe=Ce(Ie,[["render",function(e,t,n,l,o,a){const i=u,s=O,c=_,r=z,d=L,p=D,f=T,g=S("Draggable"),m=I,v=j;return x(),E(p,{trigger:"hover"},{trigger:w((()=>[P("div",je,[R(v,{trigger:"click",width:230,class:"toolbar-popover",placement:"bottom-end"},{trigger:w((()=>[R(s,{size:"18"},{default:w((()=>[R(i,{icon:"ant-design:setting-outlined"})])),_:1})])),header:w((()=>[P("div",Fe,[R(d,null,{default:w((()=>[R(c,{checked:e.checkAll,"onUpdate:checked":[t[0]||(t[0]=t=>e.checkAll=t),e.onCheckAll]},{default:w((()=>[Ve])),_:1},8,["checked","onUpdate:checked"]),R(c,{checked:e.selection,"onUpdate:checked":[t[1]||(t[1]=t=>e.selection=t),e.onSelection]},{default:w((()=>[Ae])),_:1},8,["checked","onUpdate:checked"]),R(r,{text:"",type:"info",size:"small",class:"mt-1",onClick:e.resetColumns},{default:w((()=>[$e])),_:1},8,["onClick"])])),_:1})])])),default:w((()=>[P("div",Ue,[R(m,{value:e.checkList,"onUpdate:value":[t[3]||(t[3]=t=>e.checkList=t),e.onChange]},{default:w((()=>[R(g,{modelValue:e.columnsList,"onUpdate:modelValue":t[2]||(t[2]=t=>e.columnsList=t),animation:"300","item-key":"key",onEnd:e.draggableEnd},{item:w((({element:t})=>[P("div",Me,[P("span",Be,[R(s,{size:"18"},{default:w((()=>[R(i,{icon:"ant-design:drag-outlined"})])),_:1})]),R(c,{value:t.key,label:t.title},null,8,["value","label"]),P("div",He,[R(p,{trigger:"hover",placement:"bottom"},{trigger:w((()=>[R(s,{size:"18",color:"left"===t.fixed?"#2080f0":void 0,class:"cursor-pointer",onClick:n=>e.fixedColumn(t,"left")},{default:w((()=>[R(i,{icon:"ant-design:vertical-right-outlined"})])),_:2},1032,["color","onClick"])])),default:w((()=>[We])),_:2},1024),R(f,{vertical:""}),R(p,{trigger:"hover",placement:"bottom"},{trigger:w((()=>[R(s,{size:"18",color:"right"===t.fixed?"#2080f0":void 0,class:"cursor-pointer",onClick:n=>e.fixedColumn(t,"right")},{default:w((()=>[R(i,{icon:"ant-design:vertical-left-outlined"})])),_:2},1032,["color","onClick"])])),default:w((()=>[qe])),_:2},1024)])])])),_:1},8,["modelValue","onEnd"])])),_:1},8,["value","onUpdate:value"])])])),_:1})])])),default:w((()=>[Ke])),_:1})}]]);var Ye=(e=>(e.NInput="on-input",e.NInputNumber="on-input",e.NSelect="on-update:value",e.NSwitch="on-update:value",e.NCheckbox="on-update:value",e.NDatePicker="on-update:value",e.NTimePicker="on-update:value",e))(Ye||{});const Je=new Map;Je.set("NInput",V),Je.set("NInputNumber",A),Je.set("NSelect",$),Je.set("NSwitch",U),Je.set("NCheckbox",_),Je.set("NDatePicker",M),Je.set("NTimePicker",B);function Ze(e){return"NInput"===e?"请输入":["NPicker","NSelect","NCheckbox","NRadio","NSwitch","NDatePicker","NTimePicker"].includes(e)?"请选择":""}const Ge=f({name:"EditableCell",components:{CellComponent:({component:e="NInput",rule:t=!0,ruleMessage:n,popoverVisible:l},{attrs:o})=>{const a=Je.get(e),i=H(a,o);return t?H(j,{"display-directive":"show",show:!!l,manual:"manual"},{trigger:()=>i,default:()=>H("span",{style:{color:"red",width:"90px",display:"inline-block"}},{default:()=>n})}):i}},directives:{clickOutside:ye},props:{value:{type:[String,Number,Boolean,Object],default:""},record:{type:Object},column:{type:Object,default:()=>({})},index:_e.number},setup(e){const t=Te(),n=g(!1),l=g(),o=g(!1),a=g(""),i=g([]),u=g(e.value),d=g(e.value),p=v((()=>{var t;return(null==(t=e.column)?void 0:t.editComponent)||"NInput"})),f=v((()=>{var t;return null==(t=e.column)?void 0:t.editRule})),m=v((()=>k(a)&&k(o))),h=v((()=>{const e=k(p);return["NCheckbox","NRadio"].includes(e)})),y=v((()=>{var t,n,l,o;const a=null!=(n=null==(t=e.column)?void 0:t.editComponentProps)?n:{},i=null!=(o=null==(l=e.column)?void 0:l.editComponent)?o:null,r=k(p),d=k(h),f=d?"checked":"value",g=k(u);let m=d?ke(g)&&Se(g)?g:!!g:g;xe(m)&&"NDatePicker"===r?m=W(m):Ee(m)&&"NDatePicker"===r&&(m=m.map((e=>W(e))));const v=i?Ye[i]:void 0;return c(s(s({placeholder:Ze(k(p))},{}),q(a,"onChange")),{[v]:P,[f]:m})})),S=v((()=>{var t,n;const{editComponentProps:l,editValueMap:o}=e.column,a=k(u);if(o&&we(o))return o(a);if(!k(p).includes("NSelect"))return a;const s=(null!=(t=null==l?void 0:l.options)?t:k(i)||[]).find((e=>`${e.value}`==`${a}`));return null!=(n=null==s?void 0:s.label)?n:a})),x=v((()=>({width:"calc(100% - 48px)"}))),E=v((()=>{const{align:t="center"}=e.column;return`edit-cell-align-${t}`})),w=v((()=>{const{editable:t}=e.record||{};return!!t}));function P(n){return r(this,arguments,(function*(n){var l,o,a;const i=k(p);n?(null==n?void 0:n.target)&&Reflect.has(n.target,"value")?u.value=n.target.value:"NCheckbox"===i?u.value=n.target.checked:(xe(n)||Se(n)||ke(n))&&(u.value=n):u.value=n;const s=null==(o=null==(l=e.column)?void 0:l.editComponentProps)?void 0:o.onChange;s&&we(s)&&s(...arguments),null==(a=t.emit)||a.call(t,"edit-change",{column:e.column,value:k(u),record:C(e.record)}),yield R()}))}function R(){return r(this,null,(function*(){const{column:t,record:n}=e,{editRule:l}=t,i=k(u);if(l){if(Se(l)&&!i&&!ke(i)){o.value=!0;const e=k(p);return a.value=Ze(e),!1}if(we(l)){const e=yield l(i,n);return e?(a.value=e,o.value=!0,!1):(a.value="",!0)}}return a.value="",!0}))}function N(l=!0,o=!0){return r(this,null,(function*(){var a;if(o){if(!(yield R()))return}const{column:i,index:s,record:c}=e;if(!c)return;const{key:r}=i,d=k(u);if(!r)return;X(c,r,d),l&&(null==(a=t.emit)||a.call(t,"edit-end",{record:c,index:s,key:r,value:d})),n.value=!1}))}function O(){var l;n.value=!1,u.value=d.value;const{column:i,index:s,record:c}=e,{key:r}=i;o.value=!0,a.value="",null==(l=t.emit)||l.call(t,"edit-cancel",{record:c,index:s,key:r,value:k(u)})}function _(t,n){var l;e.record&&(Ee(e.record[t])?null==(l=e.record[t])||l.push(n):e.record[t]=[n])}return b((()=>{d.value=e.value})),b((()=>{const{editable:t}=e.column;(Se(t)||Se(k(w)))&&(n.value=!!t||k(w))})),e.record&&(_("submitCbs",N),_("validCbs",R),_("cancelCbs",O),e.column.key&&(e.record.editValueRefs||(e.record.editValueRefs={}),e.record.editValueRefs[e.column.key]=u),e.record.onCancelEdit=()=>{var t,n;Ee(null==(t=e.record)?void 0:t.cancelCbs)&&(null==(n=e.record)||n.cancelCbs.forEach((e=>e())))},e.record.onSubmitEdit=()=>r(this,null,(function*(){var n,l,o,a;if(Ee(null==(n=e.record)?void 0:n.submitCbs)){const n=((null==(l=e.record)?void 0:l.validCbs)||[]).map((e=>e()));if(!(yield Promise.all(n)).every((e=>!!e)))return;return((null==(o=e.record)?void 0:o.submitCbs)||[]).forEach((e=>e(!1,!1))),null==(a=t.emit)||a.call(t,"edit-row-end"),!0}}))),{isEdit:n,handleEdit:function(){var t;k(w)||k(null==(t=e.column)?void 0:t.editRow)||(a.value="",n.value=!0,K((()=>{var e;const t=k(l);null==(e=null==t?void 0:t.focus)||e.call(t)})))},currentValueRef:u,handleSubmit:N,handleChange:P,handleCancel:O,elRef:l,getComponent:p,getRule:f,onClickOutside:function(){var t;if((null==(t=e.column)?void 0:t.editable)||k(w))return;k(p).includes("NInput")&&O()},ruleMessage:a,getRuleVisible:m,getComponentProps:y,handleOptionsChange:function(e){i.value=e},getWrapperStyle:x,getWrapperClass:E,getRowEditable:w,getValues:S,handleEnter:function(){return r(this,null,(function*(){var t;(null==(t=e.column)?void 0:t.editRow)||(yield N())}))}}}}),Qe={class:"editable-cell"},et={class:"flex editable-cell-content"},tt={class:"editable-cell-content-comp"},nt={key:0,class:"editable-cell-action"};var lt=Ce(Ge,[["render",function(e,t,n,l,o,a){const i=u,s=O,c=S("CellComponent"),r=Y("click-outside");return x(),J("div",Qe,[Z(P("div",{class:"editable-cell-content",onClick:t[0]||(t[0]=(...t)=>e.handleEdit&&e.handleEdit(...t))},[N(Q(e.getValues)+" ",1),e.column.editRow?ee("",!0):(x(),E(s,{key:0,class:"edit-icon"},{default:w((()=>[R(i,{icon:"ant-design:form-outlined"})])),_:1}))],512),[[G,!e.isEdit]]),Z((x(),J("div",et,[P("div",tt,[R(c,te(e.getComponentProps,{ref:"elRef",component:e.getComponent,style:e.getWrapperStyle,"popover-visible":e.getRuleVisible,"rule-message":e.ruleMessage,rule:e.getRule,class:e.getWrapperClass,onOptionsChange:e.handleOptionsChange,onPressEnter:e.handleEnter}),null,16,["component","style","popover-visible","rule-message","rule","class","onOptionsChange","onPressEnter"])]),e.getRowEditable?ee("",!0):(x(),J("div",nt,[R(s,{class:"mx-2 cursor-pointer"},{default:w((()=>[R(i,{icon:"ant-design:check-outlined",onClick:e.handleSubmit},null,8,["onClick"])])),_:1}),R(s,{class:"mx-2 cursor-pointer"},{default:w((()=>[R(i,{icon:"ant-design:close-outlined",onClick:e.handleCancel},null,8,["onClick"])])),_:1})]))])),[[G,e.isEdit],[r,e.onClickOutside]])])}]]);function ot(e){const t=g(k(e).columns);let n=k(e).columns;const l=v((()=>{const n=y(k(t));return function(e,t){const{actionColumn:n}=k(e);if(!n)return;!t.find((e=>"action"===e.key))&&t.push(s({},n))}(e,n),n||[]})),{hasPermission:o}=Pe();const a=v((()=>{const e=k(l);return y(e).filter((e=>o(e.auth)&&function(e){const{ifShow:t}=e;let n=!0;return Se(t)&&(n=t),we(t)&&(n=t(e)),n}(e))).map((e=>{e.ellipsis=void 0===e.ellipsis&&{tooltip:!0};const{edit:t}=e;if(t&&(e.render=function(e){return(t,n)=>{const l=e.key,o=t[l];return t.onEdit=(e,n=!1)=>r(this,null,(function*(){var l,o;return n||(t.editable=e),!e&&n?!!(yield null==(l=t.onSubmitEdit)?void 0:l.call(t))&&(t.editable=!1,!0):(e||n||null==(o=t.onCancelEdit)||o.call(t),!0)})),H(lt,{value:o,record:t,column:e,index:n})}}(e),t)){const t=e.title;e.title=()=>R(D,null,{trigger:()=>R("span",null,[R("span",{class:"mr-5px"},[t]),R(u,{class:"text-14px",icon:"ant-design:form-outlined"},null)]),default:()=>"该列可编辑"})}return e}))}));return F((()=>k(e).columns),(e=>{t.value=e,n=e})),{getColumnsRef:l,getCacheColumns:function(e){return e?n.map((e=>e.key)):n},setCacheColumnsField:function(e,t){e&&t&&n.forEach((n=>{n.key===e&&Object.assign(n,t)}))},setColumns:function(e){const l=y(e);if(!Ee(l))return;if(!l.length)return void(t.value=[]);const o=n.map((e=>e.key));if(xe(l[0])){const a=[];n.forEach((t=>{e.includes(t.key)&&a.push(s({},t))})),ne(o,l)||a.sort(((e,t)=>o.indexOf(e.key)-o.indexOf(t.key))),t.value=a}else t.value=l},getColumns:function(){return C(k(l)).map((e=>c(s({},e),{title:e.title,key:e.key,fixed:e.fixed||void 0})))},getPageColumns:a}}const{table:at}=ze,{apiSetting:it,defaultPageSize:st,pageSizes:ct}=at,rt=st,ut=it,dt=ct;const pt=c(s({},oe),{title:{type:String,default:null},titleTooltip:{type:String,default:null},size:{type:String,default:"medium"},tableData:{type:[Object],default:()=>[]},columns:{type:[Array],default:()=>[],required:!0},request:{type:Function,default:null},rowKey:{type:[String,Function],default:void 0},pagination:{type:[Object,Boolean],default:()=>{}},actionColumn:{type:Object,default:null},showAdvanced:_e.bool.def(!0),canResize:_e.bool.def(!0),resizeHeightOffset:_e.number.def(0)});var ft=(e=>(e[e.REFRESH=0]="REFRESH",e[e.SELECT=1]="SELECT",e[e.EDITOR=2]="EDITOR",e[e.DELETE=3]="DELETE",e))(ft||{});const{t:gt}=Re(),mt=[{key:ft.REFRESH,label:gt("component.table.refresh"),icon:()=>R(u,{icon:"ant-design:reload-outlined"},null)},{key:ft.SELECT,label:gt("component.table.select"),icon:()=>R(u,{icon:"ci:select-multiple"},null)},{key:ft.EDITOR,label:gt("component.table.editor"),icon:()=>R(u,{icon:"ant-design:edit-filled"},null)},{key:ft.DELETE,label:gt("component.table.delete"),icon:()=>R(u,{icon:"ant-design:delete-outlined"},null)}];const vt=[{type:"menu",label:"紧凑",key:"small"},{type:"menu",label:"默认",key:"medium"},{type:"menu",label:"宽松",key:"large"}],bt=f({components:{ColumnSetting:Xe},props:pt,emits:["fetch-success","fetch-error","update:checked-row-keys","edit-end","edit-cancel","edit-row-end","edit-change","update:drop-editor","update:drop-delete"],setup(e,{emit:t}){const n=g(150),l=g(),o=g(null);let a;const i=g([]),u=g(),d=v((()=>s(s({},e),k(u)))),{getLoading:f,setLoading:y}=function(e){const t=g(k(e).loading);return F((()=>k(e).loading),(e=>{t.value=e})),{getLoading:v((()=>k(t))),setLoading:function(e){t.value=e}}}(d),{getPaginationInfo:S,setPagination:x}=function(e){const t=g({}),n=g(!0),l=v((()=>{const{pagination:l}=k(e);if(!k(n)||Se(l)&&!l)return!1;const{totalField:o}=ut;return c(s(s({pageSize:rt,pageSizes:dt,showSizePicker:!0,showQuickJumper:!0},Se(l)?{}:l),k(t)),{pageCount:k(t)[o]})}));return{getPagination:function(){return k(l)},getPaginationInfo:l,setShowPagination:function(e){return r(this,null,(function*(){n.value=e}))},getShowPagination:function(){return k(n)},setPagination:function(e){const n=k(l);t.value=s(s({},Se(n)?{}:n),e)}}}(d),{getDataSourceRef:E,getRowKey:w,reload:P}=function(e,{getPaginationInfo:t,setPagination:n,setLoading:l,tableData:o},a){const i=g([]);b((()=>{o.value=k(i)})),F((()=>k(e).dataSource),(()=>{const{dataSource:t}=k(e);t&&(i.value=t)}),{immediate:!0});const c=v((()=>{const{rowKey:t}=k(e);return t||(()=>"key")})),u=v((()=>{const e=k(i);return e&&e.length,k(i)}));function d(o){return r(this,null,(function*(){const{request:c,pagination:r,data:u}=k(e);if(c||!u)try{l(!0);const{pageField:e}=ut,{sizeField:u}=ut,{totalField:p}=ut,{listField:f}=ut;let g={};const{page:m=1,pageSize:v=10}=k(t);Se(r)&&!r||Se(t)?g={}:(g[e]=o&&o[e]||m,g[u]=v);const b=s({},g),h=yield c(b),y=h[p]||0,C=h[e];y&&m>y&&(n({[e]:y}),d(o));const S=h[f]?h[f]:[];i.value=S,n({[e]:C,[p]:y}),o&&o[e]&&n({[e]:o[e]||1}),a("fetch-success",{items:k(S),resultTotal:y})}catch(p){a("fetch-error",p),i.value=[]}finally{l(!1)}else i.value=u}))}return le((()=>{setTimeout((()=>{d()}),16)})),{fetch:d,getRowKey:c,getDataSourceRef:u,getDataSource:function(){return u.value},setTableData:function(e){i.value=e},reload:function(e){return r(this,null,(function*(){yield d(e)}))}}}(d,{getPaginationInfo:S,setPagination:x,tableData:i,setLoading:y},t),{getPageColumns:R,setColumns:N,getColumns:O,getCacheColumns:_,setCacheColumnsField:z}=ot(d),L=m({tableSize:k(d).size||"medium",isColumnSetting:!1});const D=v((()=>L.tableSize)),T=v((()=>{const e=k(E),t=e.length&&k(V)?`${k(n)}px`:"auto";return c(s({},k(d)),{loading:k(f),rowKey:k(w),data:e,size:k(D),remote:!0,"max-height":t})})),I=v((()=>C(k(S))));const j={reload:P,setColumns:N,setLoading:y,setProps:function(e){u.value=s(s({},k(u)),e)},getColumns:O,getPageColumns:R,getCacheColumns:_,setCacheColumnsField:z,emit:t},V=v((()=>{const{canResize:e}=k(d);return e}));var A;Ne((function(){return r(this,null,(function*(){const t=de(l);if(!t||!k(V))return;const o=t.querySelector(".n-data-table-thead"),{bottomIncludeBody:i}=Le(o);let s=2;if(!Se(I))if(a=t.querySelector(".n-data-table__pagination"),a){const{offsetHeight:e}=a;s+=e||0}else s+=28;let c=i-(64+s+24+(e.resizeHeightOffset||0));const{maxHeight:r}=e;c=r&&r<c?r:c,n.value=c}))}),280,{immediate:!0}),A=c(s({},j),{wrapRef:o,getBindValues:T}),p(De,A);const $=g(!1),U=g(),M=g(0),B=g(0);return c(s({},h(L)),{tableElRef:l,getBindValues:T,densityOptions:vt,reload:P,densitySelect:function(e){L.tableSize=e},updatePage:function(e){x({page:e}),P()},updatePageSize:function(e){x({page:1,pageSize:e}),P()},getPageColumns:R,pagination:I,tableAction:j,dropMenuList:mt,showDropdown:$,x:M,y:B,handleSelect:e=>{switch($.value=!1,e){case ft.REFRESH:return P();case ft.SELECT:return n=k(U),void t("update:checked-row-keys",n);case ft.EDITOR:return t("update:drop-editor",k(U));case ft.DELETE:return t("update:drop-delete",k(U))}var n},onClickoutside:function(){$.value=!1},rowProps:e=>({onContextmenu:t=>{t.preventDefault(),K().then((()=>{U.value=e,$.value=!0,M.value=t.clientX,B.value=t.clientY}))}})})}}),ht=e=>(pe("data-v-351a4d18"),e=e(),fe(),e),yt={key:0,class:"table-toolbar"},Ct={class:"flex items-center table-toolbar-left"},kt={key:0,class:"table-toolbar-left-title"},St={class:"flex items-center table-toolbar-right"},xt=ht((()=>P("span",null,"刷新",-1))),Et={class:"table-toolbar-right-icon"},wt=ht((()=>P("span",null,"密度",-1))),Pt={class:"s-table"};var Rt=Ce(bt,[["render",function(e,t,n,l,o,a){const i=Oe,s=T,c=u,r=D,d=ge,p=Xe,f=me;return x(),J(ue,null,[e.showAdvanced?(x(),J("div",yt,[P("div",Ct,[e.title?(x(),J("div",kt,[e.titleTooltip?(x(),E(i,{key:0,tipsMessage:e.titleTooltip,trigger:"hover"},{default:w((()=>[N(Q(e.title),1)])),_:1},8,["tipsMessage"])):ee("",!0)])):ee("",!0),ae(e.$slots,"tableTitle",{},void 0,!0)]),P("div",St,[ae(e.$slots,"toolbar",{},void 0,!0),R(s,{class:"!ml-5",vertical:""}),R(r,{trigger:"hover"},{trigger:w((()=>[P("div",{class:"table-toolbar-right-icon",onClick:t[0]||(t[0]=(...t)=>e.reload&&e.reload(...t))},[R(c,{icon:"ant-design:reload-outlined",class:"text-18px"})])])),default:w((()=>[xt])),_:1}),R(r,{trigger:"hover"},{trigger:w((()=>[P("div",Et,[R(d,{value:e.tableSize,"onUpdate:value":t[1]||(t[1]=t=>e.tableSize=t),trigger:"click",options:e.densityOptions,onSelect:e.densitySelect},{default:w((()=>[R(c,{icon:"ant-design:column-height-outlined",class:"text-18px"})])),_:1},8,["value","options","onSelect"])])])),default:w((()=>[wt])),_:1}),R(p)])])):ee("",!0),P("div",Pt,[R(f,te({ref:"tableElRef"},e.getBindValues,{columns:e.getPageColumns,pagination:e.pagination,"onUpdate:page":e.updatePage,"onUpdate:pageSize":e.updatePageSize,"row-props":e.rowProps}),ie({_:2},[se(Object.keys(e.$slots),(t=>({name:t,fn:w((n=>[ae(e.$slots,t,ce(re(n)),void 0,!0)]))})))]),1040,["columns","pagination","onUpdate:page","onUpdate:pageSize","row-props"]),R(d,{placement:"bottom-start",trigger:"manual",x:e.x,y:e.y,options:e.dropMenuList,show:e.showDropdown,onSelect:e.handleSelect,"on-clickoutside":e.onClickoutside},null,8,["x","y","options","show","onSelect","on-clickoutside"])])],64)}],["__scopeId","data-v-351a4d18"]]);const Nt=f({props:{isWrapper:Boolean},setup(e){const t=ve(),n=v((()=>q(s({showIcon:!0},t),["title","icon"])));return(l,o)=>{const a=u,i=be;return e.isWrapper?(x(),E(i,ce(te({key:0},k(n))),ie({trigger:w((()=>[ae(l.$slots,"default")])),default:w((()=>[N(" "+Q(k(t).title),1)])),_:2},[k(t).icon?{name:"icon",fn:w((()=>[R(a,{icon:k(t).icon},null,8,["icon"])]))}:void 0]),1040)):ae(l.$slots,"default",{key:1})}}}),Ot={class:"tableAction"},_t={class:"flex items-center justify-center py-1 px-2 space-x-2"},zt=f(c(s({},{name:"TableAction"}),{props:{actions:null,dropDownActions:null,style:{default:"button"},select:null},setup(e){const t=e,{hasPermission:n}=Pe(),i="button"===t.style?"default":"text"===t.style?"primary":"default",r="button"===t.style?void 0:"text"===t.style||void 0,d=v((()=>({text:r,type:i,size:"small"}))),p=v((()=>(C(t.dropDownActions)||[]).filter((e=>n(e.auth)&&g(e))))),f=v((()=>(C(t.actions)||[]).filter((e=>n(e.auth)&&g(e))).map((e=>{const{popConfirm:t}=e;return c(s(s({size:"small",text:r,type:i},e),t||{}),{enable:!!t})}))));function g(e){const t=e.ifShow;let n=!0;return Se(t)&&(n=t),we(t)&&(n=t(e)),n}return(t,n)=>{const i=u,s=z,c=ge;return x(),J("div",Ot,[P("div",_t,[(x(!0),J(ue,null,se(k(f),((e,t)=>{var n=e,{icon:c,label:r,enable:u,popConfirm:d}=n,p=((e,t)=>{var n={};for(var i in e)o.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&l)for(var i of l(e))t.indexOf(i)<0&&a.call(e,i)&&(n[i]=e[i]);return n})(n,["icon","label","enable","popConfirm"]);return x(),E(Nt,te({key:`${t}-${r}`,"is-wrapper":u},d),{default:w((()=>[R(s,ce(re(p)),ie({default:w((()=>[N(Q(r),1)])),_:2},[c?{name:"icon",fn:w((()=>[R(i,{icon:c},null,8,["icon"])]))}:void 0]),1040)])),_:2},1040,["is-wrapper"])})),128)),e.dropDownActions&&k(p).length?(x(),E(c,{key:0,trigger:"hover",options:k(p),onSelect:e.select},{default:w((()=>[ae(t.$slots,"more",{},(()=>[R(i,te({icon:"akar-icons:more-horizontal",class:"!ml-4"},k(d)),null,16)]))])),_:3},8,["options","onSelect"])):ee("",!0)])])}}}));export{Rt as B,zt as _};
