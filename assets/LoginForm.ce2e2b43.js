var e=(e,a,s)=>new Promise(((t,l)=>{var o=e=>{try{r(s.next(e))}catch(a){l(a)}},n=e=>{try{r(s.throw(e))}catch(a){l(a)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,n);r((s=s.apply(e,a)).next())}));import{_ as a}from"./Icon.b68f9da1.js";import{G as s,v as t,r as l,q as o,u as n,a7 as r,a8 as i,V as c,W as u,X as d,Y as p,aF as g,as as f,ao as y,ae as m,aG as x,t as _,aH as h,aI as v,aJ as w,aK as b,aL as k,aM as S,aN as j,aO as I,aP as L,aQ as T}from"./vendor.07696a3b.js";import{b as z,n as M,e as P}from"./index.3471ac16.js";import{u as C,a as D,L as E,b as F}from"./useLogin.e4ced945.js";import{u as N}from"./useDesign.9e27b231.js";import"./propTypes.eec1be73.js";const O=s({setup(s){const{t:O}=z(),{notification:R,createDialog:q}=M(),{prefixCls:B}=N("login"),G=P(),{setLoginState:K,getLoginState:U}=C(),{getFormRules:$}=D(),W=t(),A=t(!1),H=t(!1),J=l({account:"admin",password:"123456"}),Q=o((()=>n(U)===E.LOGIN));function V(){return e(this,null,(function*(){const{onSuccess:a}=F(W);a((()=>e(this,null,(function*(){try{A.value=!0;const e=yield G.login(_({password:J.password,username:J.account,mode:"none"}));e&&(null==R||R.success({title:O("sys.login.loginSuccessTitle"),content:`${O("sys.login.loginSuccessDesc")}: ${e.realName}`,duration:3e3}))}catch(e){null==q||q.error({title:O("sys.api.errorTip"),content:e.message||O("sys.api.networkExceptionMsg")})}finally{A.value=!1}}))))}))}return(e,s)=>{const t=h,l=v,o=w,_=b,z=k,M=a,P=S,C=j,D=I,F=L,N=T;return r((c(),u(N,{ref_key:"formRef",ref:W,class:"p-4 enter-x",model:n(J),rules:n($),"show-label":!1,onKeypress:x(V,["enter"])},{default:d((()=>[p(l,{label:"account",path:"account"},{default:d((()=>[p(t,{value:n(J).account,"onUpdate:value":s[0]||(s[0]=e=>n(J).account=e),size:"large",placeholder:n(O)("sys.login.userName")},null,8,["value","placeholder"])])),_:1}),p(l,{label:"password",path:"password"},{default:d((()=>[p(t,{value:n(J).password,"onUpdate:value":s[1]||(s[1]=e=>n(J).password=e),size:"large",type:"password","show-password-on":"mousedown",placeholder:n(O)("sys.login.password")},null,8,["value","placeholder"])])),_:1}),p(z,{justify:"space-between"},{default:d((()=>[p(l,{path:"rememberMe"},{default:d((()=>[p(o,{checked:H.value,"onUpdate:checked":s[2]||(s[2]=e=>H.value=e),size:"small"},{default:d((()=>[g(f(n(O)("sys.login.rememberMe")),1)])),_:1},8,["checked"])])),_:1}),p(l,{class:"text-right"},{default:d((()=>[p(_,{tag:"a",text:"",type:"primary",size:"small",onClick:s[3]||(s[3]=e=>n(K)(n(E).RESET_PASSWORD))},{default:d((()=>[g(f(n(O)("sys.login.forgetPassword")),1)])),_:1})])),_:1})])),_:1}),p(l,null,{default:d((()=>[p(_,{type:"primary",size:"large",block:"",loading:A.value,onClick:V},{default:d((()=>[g(f(n(O)("sys.login.loginButton")),1)])),_:1},8,["loading"])])),_:1}),p(C,{cols:"1 sm:3",responsive:"screen","x-gap":8,"y-gap":8},{default:d((()=>[p(P,null,{default:d((()=>[p(_,{block:"",onClick:s[4]||(s[4]=e=>n(K)(n(E).MOBILE))},{icon:d((()=>[p(M,{icon:"akar-icons:mobile-device"})])),default:d((()=>[g(f(n(O)("sys.login.mobileSignInFormTitle"))+" ",1)])),_:1})])),_:1}),p(P,null,{default:d((()=>[p(_,{block:""},{icon:d((()=>[p(M,{icon:"ci:qr-code"})])),default:d((()=>[g(f(n(O)("sys.login.qrSignInFormTitle"))+" ",1)])),_:1})])),_:1}),p(P,null,{default:d((()=>[p(_,{block:""},{default:d((()=>[g(f(n(O)("sys.login.registerButton")),1)])),_:1})])),_:1})])),_:1}),p(F,null,{default:d((()=>[p(D,{class:"text-12px text-gray-500"},{default:d((()=>[g(f(n(O)("sys.login.otherSignIn")),1)])),_:1})])),_:1}),y("div",{class:m(["flex justify-evenly",`${n(B)}-sign-in-way`])},[p(_,{text:"",class:"text-25px text-gray-500 dark:text-gray-400"},{default:d((()=>[p(M,{icon:"ant-design:github-filled"})])),_:1}),p(_,{text:"",class:"text-25px text-gray-500 dark:text-gray-400"},{default:d((()=>[p(M,{icon:"ant-design:wechat-filled"})])),_:1}),p(_,{text:"",class:"text-25px text-gray-500 dark:text-gray-400"},{default:d((()=>[p(M,{icon:"ant-design:alipay-circle-filled"})])),_:1}),p(_,{text:"",class:"text-23px text-gray-500 dark:text-gray-400"},{default:d((()=>[p(M,{icon:"simple-icons:gitee"})])),_:1})],2)])),_:1},8,["model","rules","onKeypress"])),[[i,n(Q)]])}}});export{O as default};
