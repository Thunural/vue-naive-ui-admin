import{c as e,p as s}from"./Tooltip-CFz38RsP.js";import{c as o,b as t,N as n,h as r,m as a}from"./utils-gZPJG5sK.js";import{a6 as l,y as i,d as u,s as c,C as d,G as p,eT as h,i as v,E as m,Y as f,F as g,H as y,k as b,cH as w,am as P,r as M,a5 as O,cG as j,eU as C}from"./index-DRiF00Hx.js";import{c as S}from"./create-ref-setter-DNc6_3jH.js";const T=l("n-popselect"),x=i("popselect-menu","\n box-shadow: var(--n-menu-box-shadow);\n"),$={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},k=w($),R=u({name:"PopselectPanel",props:$,setup(e){const s=c(T),{mergedClsPrefixRef:n,inlineThemeDisabled:a}=d(e),l=p("Popselect","-pop-select",x,h,s.props,n),i=v((()=>o(e.options,t("value","children"))));function u(s,o){const{onUpdateValue:t,"onUpdate:value":n,onChange:r}=e;t&&P(t,s,o),n&&P(n,s,o),r&&P(r,s,o)}m(g(e,"options"),(()=>{f((()=>{s.syncPosition()}))}));const b=v((()=>{const{self:{menuBoxShadow:e}}=l.value;return{"--n-menu-box-shadow":e}})),w=a?y("select",void 0,b,s.props):void 0;return{mergedTheme:s.mergedThemeRef,mergedClsPrefix:n,treeMate:i,handleToggle:function(o){!function(o){const{value:{getNode:t}}=i;if(e.multiple)if(Array.isArray(e.value)){const s=[],n=[];let r=!0;e.value.forEach((e=>{if(e===o)return void(r=!1);const a=t(e);a&&(s.push(a.key),n.push(a.rawNode))})),r&&(s.push(o),n.push(t(o).rawNode)),u(s,n)}else{const e=t(o);e&&u([o],[e.rawNode])}else if(e.value===o&&e.cancelable)u(null,null);else{const e=t(o);e&&u(o,e.rawNode);const{"onUpdate:show":n,onUpdateShow:r}=s.props;n&&P(n,!1),r&&P(r,!1),s.setShow(!1)}f((()=>{s.syncPosition()}))}(o.key)},handleMenuMousedown:function(e){r(e,"action")||r(e,"empty")||r(e,"header")||e.preventDefault()},cssVars:a?void 0:b,themeClass:null==w?void 0:w.themeClass,onRender:null==w?void 0:w.onRender}},render(){var e;return null===(e=this.onRender)||void 0===e||e.call(this),b(n,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{header:()=>{var e,s;return(null===(s=(e=this.$slots).header)||void 0===s?void 0:s.call(e))||[]},action:()=>{var e,s;return(null===(s=(e=this.$slots).action)||void 0===s?void 0:s.call(e))||[]},empty:()=>{var e,s;return(null===(s=(e=this.$slots).empty)||void 0===s?void 0:s.call(e))||[]}})}}),A=u({name:"Popselect",props:Object.assign(Object.assign(Object.assign(Object.assign({},p.props),C(s,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},s.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),$),inheritAttrs:!1,__popover__:!0,setup(e){const{mergedClsPrefixRef:s}=d(e),o=p("Popselect","-popselect",void 0,h,e,s),t=M(null);function n(){var e;null===(e=t.value)||void 0===e||e.syncPosition()}function r(e){var s;null===(s=t.value)||void 0===s||s.setShow(e)}O(T,{props:e,mergedThemeRef:o,syncPosition:n,setShow:r});const a={syncPosition:n,setShow:r};return Object.assign(Object.assign({},a),{popoverInstRef:t,mergedTheme:o})},render(){const{mergedTheme:s}=this,o={theme:s.peers.Popover,themeOverrides:s.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(e,s,o,t,n)=>{const{$attrs:r}=this;return b(R,Object.assign({},r,{class:[r.class,e],style:[r.style,...o]},j(this.$props,k),{ref:S(s),onMouseenter:a([t,r.onMouseenter]),onMouseleave:a([n,r.onMouseleave])}),{header:()=>{var e,s;return null===(s=(e=this.$slots).header)||void 0===s?void 0:s.call(e)},action:()=>{var e,s;return null===(s=(e=this.$slots).action)||void 0===s?void 0:s.call(e)},empty:()=>{var e,s;return null===(s=(e=this.$slots).empty)||void 0===s?void 0:s.call(e)}})}};return b(e,Object.assign({},C(this.$props,k),o,{internalDeactivateImmediately:!0}),{trigger:()=>{var e,s;return null===(s=(e=this.$slots).default)||void 0===s?void 0:s.call(e)}})}});export{A as _};
