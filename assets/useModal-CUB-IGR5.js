import{p as o,r as l,i as a,b as n,bx as s,dm as e,dN as r,gQ as t,hd as u,ay as d,et as i,Y as c,gp as v}from"./index-C6F7-JtS.js";import{i as M}from"./isEqual-BUASm4lt.js";const p=o({}),g=o({});function h(){const o=l(null),d=l(!1),i=l("");const c=()=>{const l=n(o);return l||u("useModal instance is undefined!"),l};return[function(l,a){if(!e())throw new Error("useModal() can only be used inside setup() or functional components!");i.value=a,r((()=>{o.value=null,d.value=!1,p[n(i)]=null})),n(d)&&t()&&l===n(o)||(o.value=l,d.value=!0,l.emitShow=(o,l)=>{g[l]=o})},{setModalProps:o=>{var l;null==(l=c())||l.setModalProps(o)},getShow:a((()=>g[~~n(i)])),redoModalHeight:()=>{var o,l;null==(l=null==(o=c())?void 0:o.redoModalHeight)||l.call(o)},openModal:(o=!0,l,a=!0)=>{var e;if(null==(e=c())||e.setModalProps({show:o}),!l)return;const r=n(i);if(a)return p[r]=null,void(p[r]=s(l));M(s(p[r]),s(l))||(p[r]=s(l))},closeModal:()=>{var o;null==(o=c())||o.setModalProps({show:!1})}}]}const f=o=>{const s=l(null),r=e(),t=l(""),M=()=>{const o=n(s);return o||u("useModalInner instance is undefined!"),o};return d((()=>{const l=p[n(t)];l&&o&&i(o)&&c((()=>{o(l)}))})),[(o,l)=>{v((()=>{s.value=null})),t.value=l,s.value=o,null==r||r.emit("register",o,l)},{changeLoading:(o=!0)=>{var l;null==(l=M())||l.setModalProps({loading:o})},getShow:a((()=>g[~~n(t)])),changeOkLoading:(o=!0)=>{var l;null==(l=M())||l.setModalProps({confirmLoading:o})},closeModal:()=>{var o;null==(o=M())||o.setModalProps({show:!1})},setModalProps:o=>{var l;null==(l=M())||l.setModalProps(o)},redoModalHeight:()=>{var o;const l=null==(o=M())?void 0:o.redoModalHeight;l&&l()}}]};export{f as a,h as u};
