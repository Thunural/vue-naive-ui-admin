import{T as e,a6 as t,d as s,s as i,i as r,bU as o,k as l,dm as a,C as p,r as n,cn as d,D as v,a5 as u,F as f,f7 as h,U as m,co as S,al as c,d2 as y}from"./index-C6F7-JtS.js";import{u as g,a as b}from"./use-breakpoints-Dzw82uW6.js";import{b as w}from"./next-frame-once-DiJwGkuW.js";import{g as $}from"./get-slot-BjAOOWF7.js";const R=t("n-grid"),x=1,G=s({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:{span:{type:[Number,String],default:x},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},setup(){const{isSsrRef:e,xGapRef:t,itemStyleRef:s,overflowRef:l,layoutShiftDisabledRef:p}=i(R),n=a();return{overflow:l,itemStyle:s,layoutShiftDisabled:p,mergedXGap:r((()=>o(t.value||0))),deriveStyle:()=>{e.value;const{privateSpan:s=x,privateShow:i=!0,privateColStart:r,privateOffset:l=0}=n.vnode.props,{value:a}=t,p=o(a||0);return{display:i?"":"none",gridColumn:`${null!=r?r:`span ${s}`} / span ${s}`,marginLeft:l?`calc((100% - (${s} - 1) * ${p}) / ${s} * ${l} + ${p} * ${l})`:""}}}},render(){var e,t;if(this.layoutShiftDisabled){const{span:e,offset:t,mergedXGap:s}=this;return l("div",{style:{gridColumn:`span ${e} / span ${e}`,marginLeft:t?`calc((100% - (${e} - 1) * ${s}) / ${e} * ${t} + ${s} * ${t})`:""}},this.$slots)}return l("div",{style:[this.itemStyle,this.deriveStyle()]},null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e,{overflow:this.overflow}))}}),C={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},_="__ssr__",N=s({name:"Grid",inheritAttrs:!1,props:{layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:24},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},setup(e){const{mergedClsPrefixRef:t,mergedBreakpointsRef:s}=p(e),i=/^\d+$/,l=n(void 0),a=g((null==s?void 0:s.value)||C),m=d((()=>!!e.itemResponsive||(!i.test(e.cols.toString())||(!i.test(e.xGap.toString())||!i.test(e.yGap.toString()))))),S=r((()=>{if(m.value)return"self"===e.responsive?l.value:a.value})),c=d((()=>{var t;return null!==(t=Number(b(e.cols.toString(),S.value)))&&void 0!==t?t:24})),y=d((()=>b(e.xGap.toString(),S.value))),$=d((()=>b(e.yGap.toString(),S.value))),x=e=>{l.value=e.contentRect.width},G=e=>{w(x,e)},N=n(!1),D=r((()=>{if("self"===e.responsive)return G})),B=n(!1),E=n();return v((()=>{const{value:e}=E;e&&e.hasAttribute(_)&&(e.removeAttribute(_),B.value=!0)})),u(R,{layoutShiftDisabledRef:f(e,"layoutShiftDisabled"),isSsrRef:B,itemStyleRef:f(e,"itemStyle"),xGapRef:y,overflowRef:N}),{isSsr:!h,contentEl:E,mergedClsPrefix:t,style:r((()=>e.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${e.cols}, minmax(0, 1fr))`,columnGap:o(e.xGap),rowGap:o(e.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${c.value}, minmax(0, 1fr))`,columnGap:o(y.value),rowGap:o($.value)})),isResponsive:m,responsiveQuery:S,responsiveCols:c,handleResize:D,overflow:N}},render(){if(this.layoutShiftDisabled)return l("div",m({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const t=()=>{var t,s,i,r,o,a,p;this.overflow=!1;const n=c($(this)),d=[],{collapsed:v,collapsedRows:u,responsiveCols:f,responsiveQuery:h}=this;n.forEach((t=>{var s,i,r,o,l;if(!0!==(null===(s=null==t?void 0:t.type)||void 0===s?void 0:s.__GRID_ITEM__))return;if(function(t){var s;const i=null===(s=t.dirs)||void 0===s?void 0:s.find((({dir:t})=>t===e));return!(!i||!1!==i.value)}(t)){const e=y(t);return e.props?e.props.privateShow=!1:e.props={privateShow:!1},void d.push({child:e,rawChildSpan:0})}t.dirs=(null===(i=t.dirs)||void 0===i?void 0:i.filter((({dir:t})=>t!==e)))||null,0===(null===(r=t.dirs)||void 0===r?void 0:r.length)&&(t.dirs=null);const a=y(t),p=Number(null!==(l=b(null===(o=a.props)||void 0===o?void 0:o.span,h))&&void 0!==l?l:1);0!==p&&d.push({child:a,rawChildSpan:p})}));let S=0;const g=null===(t=d[d.length-1])||void 0===t?void 0:t.child;if(null==g?void 0:g.props){const e=null===(s=g.props)||void 0===s?void 0:s.suffix;void 0!==e&&!1!==e&&(S=Number(null!==(r=b(null===(i=g.props)||void 0===i?void 0:i.span,h))&&void 0!==r?r:1),g.props.privateSpan=S,g.props.privateColStart=f+1-S,g.props.privateShow=null===(o=g.props.privateShow)||void 0===o||o)}let w=0,R=!1;for(const{child:e,rawChildSpan:l}of d){if(R&&(this.overflow=!0),!R){const t=Number(null!==(p=b(null===(a=e.props)||void 0===a?void 0:a.offset,h))&&void 0!==p?p:0),s=Math.min(l+t,f);if(e.props?(e.props.privateSpan=s,e.props.privateOffset=t):e.props={privateSpan:s,privateOffset:t},v){const e=w%f;s+e>f&&(w+=f-e),s+w+S>u*f?R=!0:w+=s}}R&&(e.props?!0!==e.props.privateShow&&(e.props.privateShow=!1):e.props={privateShow:!1})}return l("div",m({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[_]:this.isSsr||void 0},this.$attrs),d.map((({child:e})=>e)))};return this.isResponsive&&"self"===this.responsive?l(S,{onResize:this.handleResize},{default:t}):t()}});export{G as _,N as a};
