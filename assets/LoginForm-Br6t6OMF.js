var e=(e,s,t)=>new Promise(((a,o)=>{var l=e=>{try{n(t.next(e))}catch(s){o(s)}},r=e=>{try{n(t.throw(e))}catch(s){o(s)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,r);n((t=t.apply(e,s)).next())}));import{_ as s}from"./Icon-DYE_U4AS.js";import{d as t,ag as a,er as o,cA as l,r,p as n,i,b as c,S as u,T as p,o as d,e as m,w as g,h as f,q as y,t as x,a as _,n as h,eo as v,bx as j,B as w}from"./index-C6F7-JtS.js";import{u as b,a as k,L as S,b as I}from"./useLogin-Did7aF9V.js";import{u as L}from"./useDesign-CRwT266l.js";import{_ as T}from"./Input-DqCdjJu0.js";import{_ as z,a as C}from"./FormItem-D5Bi41Vk.js";import{_ as D}from"./Checkbox-DY9r01Qv.js";import{_ as B}from"./Space-nLn5ELHN.js";import{_ as E,a as F}from"./Grid-DrL4JrfR.js";import{_ as q}from"./text-Dwv7G5S3.js";import{_ as M}from"./Divider-C2yuMtyF.js";import"./propTypes-BrA6lfYr.js";import"./use-locale-ByhSuOII.js";import"./use-merged-state-9o6AQHu9.js";import"./format-length-l2rsThpR.js";import"./get-jboavJ-P.js";import"./light-D16k62Gl.js";import"./get-slot-BjAOOWF7.js";import"./use-breakpoints-Dzw82uW6.js";import"./next-frame-once-DiJwGkuW.js";const P=t({__name:"LoginForm",setup(t){const{t:P}=a(),{notification:R,createDialog:A}=o(),{prefixCls:N}=L("login"),O=l(),{setLoginState:U,getLoginState:$}=b(),{getFormRules:G}=k(),K=r(),W=r(!1),H=r(!1),J=n({account:"admin",password:"123456"}),Q=i((()=>c($)===S.LOGIN));function V(){return e(this,null,(function*(){const{onSuccess:s}=I(K);s((()=>e(this,null,(function*(){try{W.value=!0;const e=yield O.login(j({password:J.password,username:J.account,mode:"none"}));e&&(null==R||R.success({title:P("sys.login.loginSuccessTitle"),content:`${P("sys.login.loginSuccessDesc")}: ${e.realName}`,duration:3e3}))}catch(e){null==A||A.error({title:P("sys.api.errorTip"),content:e.message||P("sys.api.networkExceptionMsg")})}finally{W.value=!1}}))))}))}return(e,t)=>{const a=T,o=z,l=D,r=w,n=B,i=s,j=E,b=F,k=q,I=M,L=C;return u((d(),m(L,{ref_key:"formRef",ref:K,class:"p-4 enter-x",model:J,rules:c(G),"show-label":!1,onKeypress:v(V,["enter"])},{default:g((()=>[f(o,{label:"account",path:"account"},{default:g((()=>[f(a,{value:J.account,"onUpdate:value":t[0]||(t[0]=e=>J.account=e),size:"large",placeholder:c(P)("sys.login.userName")},null,8,["value","placeholder"])])),_:1}),f(o,{label:"password",path:"password"},{default:g((()=>[f(a,{value:J.password,"onUpdate:value":t[1]||(t[1]=e=>J.password=e),size:"large",type:"password","show-password-on":"mousedown",placeholder:c(P)("sys.login.password")},null,8,["value","placeholder"])])),_:1}),f(n,{justify:"space-between"},{default:g((()=>[f(o,{path:"rememberMe"},{default:g((()=>[f(l,{checked:H.value,"onUpdate:checked":t[2]||(t[2]=e=>H.value=e),size:"small"},{default:g((()=>[y(x(c(P)("sys.login.rememberMe")),1)])),_:1},8,["checked"])])),_:1}),f(o,{class:"text-right"},{default:g((()=>[f(r,{tag:"a",text:"",type:"primary",size:"small",onClick:t[3]||(t[3]=e=>c(U)(c(S).RESET_PASSWORD))},{default:g((()=>[y(x(c(P)("sys.login.forgetPassword")),1)])),_:1})])),_:1})])),_:1}),f(o,null,{default:g((()=>[f(r,{type:"primary",size:"large",block:"",loading:W.value,onClick:V},{default:g((()=>[y(x(c(P)("sys.login.loginButton")),1)])),_:1},8,["loading"])])),_:1}),f(b,{cols:"1 sm:3",responsive:"screen","x-gap":8,"y-gap":8},{default:g((()=>[f(j,null,{default:g((()=>[f(r,{block:"",onClick:t[4]||(t[4]=e=>c(U)(c(S).MOBILE))},{icon:g((()=>[f(i,{icon:"akar-icons:mobile-device"})])),default:g((()=>[y(x(c(P)("sys.login.mobileSignInFormTitle"))+" ",1)])),_:1})])),_:1}),f(j,null,{default:g((()=>[f(r,{block:""},{icon:g((()=>[f(i,{icon:"ci:qr-code"})])),default:g((()=>[y(x(c(P)("sys.login.qrSignInFormTitle"))+" ",1)])),_:1})])),_:1}),f(j,null,{default:g((()=>[f(r,{block:""},{default:g((()=>[y(x(c(P)("sys.login.registerButton")),1)])),_:1})])),_:1})])),_:1}),f(I,null,{default:g((()=>[f(k,{class:"text-12px text-gray-500"},{default:g((()=>[y(x(c(P)("sys.login.otherSignIn")),1)])),_:1})])),_:1}),_("div",{class:h(["flex justify-evenly",`${c(N)}-sign-in-way`])},[f(r,{text:"",class:"text-25px text-gray-500 dark:text-gray-400"},{default:g((()=>[f(i,{icon:"ant-design:github-filled"})])),_:1}),f(r,{text:"",class:"text-25px text-gray-500 dark:text-gray-400"},{default:g((()=>[f(i,{icon:"ant-design:wechat-filled"})])),_:1}),f(r,{text:"",class:"text-25px text-gray-500 dark:text-gray-400"},{default:g((()=>[f(i,{icon:"ant-design:alipay-circle-filled"})])),_:1}),f(r,{text:"",class:"text-23px text-gray-500 dark:text-gray-400"},{default:g((()=>[f(i,{icon:"simple-icons:gitee"})])),_:1})],2)])),_:1},8,["model","rules"])),[[p,Q.value]])}}});export{P as default};
