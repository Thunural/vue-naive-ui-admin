import{_ as t}from"./Icon-BBFjs19F.js";import{_ as e}from"./Ellipsis-Da6Gdt_u.js";import{S as a}from"./Scrollbar-BjERxMmX.js";import{d as s,a0 as l,o as i,e as o,w as r,S as p,c as n,a4 as m,O as d,h as c,n as u,M as v,t as y,q as f,a as g,r as h,b3 as j,i as b,bv as x,f as _,b as k,a2 as w}from"./index-DRiF00Hx.js";import{_ as C}from"./Avatar-BSI9JTG4.js";import{_ as z}from"./text-B2L-mfFF.js";import{_ as T}from"./Tag-DnTiE1E0.js";import{_ as D}from"./Thing-V-Szom20.js";import{_ as G,a as O}from"./ListItem-CAfLb5rb.js";import{_ as S}from"./Empty-Byo6tjCM.js";import{u as $}from"./useDesign-BvV_xiJk.js";import{_ as A}from"./Badge-DdZgnTw0.js";import{a as B,b as E}from"./Tabs-wUYA_Vbj.js";import{c as N}from"./Tooltip-CFz38RsP.js";import{_ as M}from"./Space-Bn-zZsLi.js";import"./propTypes-BrA6lfYr.js";import"./utils-BKNBMClf.js";import"./light-BjF-GFCJ.js";import"./use-locale-B6YvjK0_.js";import"./light-BowfIMOf.js";import"./attribute-Cap6sGiE.js";import"./Add-CNS4l2VR.js";import"./use-merged-state-D6ChJkmy.js";import"./toNumber-47Q-fbdQ.js";import"./cssr-BAp9t9hT.js";import"./_baseIsEqual-CCRaRR-p.js";import"./get-g7Q8ZpuG.js";import"./format-length-l2rsThpR.js";import"./next-frame-once-DiJwGkuW.js";import"./light-iUBSSS2B.js";import"./get-slot-BjAOOWF7.js";const P=[{key:"1",name:"通知",list:[{id:"000000001",avatar:"https://gw.alipayobjects.com/zos/rmsportal/ThXAXghbEsBCCSDihZxY.png",title:"你收到了 14 份新周报",datetime:"2022-08-09",type:"1"},{id:"000000002",avatar:"https://gw.alipayobjects.com/zos/rmsportal/OKJXDXrmkNshAMvwtvhu.png",title:"你推荐的 罗伯茨 已通过第三轮面试",datetime:"2022-08-08",type:"1"},{id:"000000003",avatar:"https://gw.alipayobjects.com/zos/rmsportal/kISTdvpyTAhtGxpovNWd.png",title:"这种模板可以区分多种通知类型",datetime:"2022-08-07",type:"1"},{id:"000000004",avatar:"https://gw.alipayobjects.com/zos/rmsportal/GvqBnKhFgObvnSGkDsje.png",title:"左侧图标用于区分不同的类型",datetime:"2022-08-07",type:"1"},{id:"000000005",avatar:"https://gw.alipayobjects.com/zos/rmsportal/GvqBnKhFgObvnSGkDsje.png",title:"标题可以设置自动显示省略号，本例中标题行数已设为1行，如果内容超过1行将自动截断并支持tooltip显示完整标题。",datetime:"2022-08-07",type:"1"}]},{key:"2",name:"消息",badgeType:"info",list:[{id:"000000006",avatar:"https://gw.alipayobjects.com/zos/rmsportal/fcHMVNCjPOsbUGdEduuv.jpeg",title:"莉蛐蛐 评论了你",description:"描述信息描述信息描述信息",datetime:"2017-08-07",type:"2"},{id:"000000007",avatar:"https://gw.alipayobjects.com/zos/rmsportal/fcHMVNCjPOsbUGdEduuv.jpeg",title:"范德萨 回复了你",description:"这种模板用于提醒谁与你发生了互动",datetime:"2022-08-07",type:"2"},{id:"000000008",avatar:"https://gw.alipayobjects.com/zos/rmsportal/fcHMVNCjPOsbUGdEduuv.jpeg",title:"标题",description:"请将鼠标移动到此处，以便测试超长的消息在此处将如何处理。本例中设置的描述最大行数为2，超过2行的描述内容将被省略并且可以通过tooltip查看完整内容",datetime:"2024-08-07",type:"2"}]},{key:"3",name:"待办",badgeType:"success",list:[{id:"000000009",avatar:"",title:"任务名称",description:"任务需要在 2017-01-12 20:00 前启动",datetime:"",extra:"未开始",color:"default",type:"3"},{id:"000000010",avatar:"",title:"第三方紧急代码变更",description:"范德萨 需在 2023-01-07 前完成代码变更任务",datetime:"",extra:"马上到期",color:"error",type:"3"},{id:"000000011",avatar:"",title:"信息安全考试",description:"指派史蒂芬斯于 2022-01-09 前完成更新并发布",datetime:"",extra:"已耗时 8 天",color:"warning",type:"3"},{id:"000000012",avatar:"",title:"ABCD 版本发布",description:"指派竹尔于 2021-01-09 前完成更新并发布后面还加了好几个文字以此增加长度",datetime:"",extra:"进行中",color:"info",type:"3"}]}],q={key:1},I={key:1,class:"text-$app-text-color-3"},R={class:"text-$app-text-color-3"},U=s({__name:"NoticeList",props:{list:{default:()=>[]},loading:{type:Boolean,default:!1},titleRows:{default:1},descRows:{default:2}},setup:t=>(t,s)=>{const h=C,j=z,b=e,x=T,_=D,k=G,w=S,$=O,A=a,B=l("loading");return i(),o(A,{style:{"max-height":"360px"}},{default:r((()=>[p((i(),o($,null,{default:r((()=>[t.list.length?(i(!0),n(m,{key:0},d(t.list,(e=>(i(),o(k,{key:e.id,class:"hover:bg-$app-hover-color cursor-pointer",onClick:t=>(t=>{t.read=!0})(e)},{default:r((()=>[c(_,{class:u(["px-4",{"opacity-30":e.read}])},v({avatar:r((()=>[e.avatar?(i(),o(h,{key:0,style:{backgroundColor:"transparent"},src:e.avatar},null,8,["src"])):(i(),n("span",q,y(e.avatar),1))])),header:r((()=>[c(b,{"line-clamp":t.titleRows,tooltip:{placement:"top"}},{tooltip:r((()=>[f(y(e.title),1)])),default:r((()=>[c(j,null,{default:r((()=>[f(y(e.title),1)])),_:2},1024)])),_:2},1032,["line-clamp"])])),description:r((()=>[e.description?(i(),o(b,{key:0,"line-clamp":t.descRows},{default:r((()=>[f(y(e.description),1)])),_:2},1032,["line-clamp"])):(i(),n("span",I,y(e.datetime),1))])),_:2},[e.extra?{name:"header-extra",fn:r((()=>[c(x,{type:null==e?void 0:e.color,size:"small"},{default:r((()=>[f(y(e.extra),1)])),_:2},1032,["type"])])),key:"0"}:void 0,e.description?{name:"footer",fn:r((()=>[g("span",R,y(e.datetime),1)])),key:"1"}:void 0]),1032,["class"])])),_:2},1032,["onClick"])))),128)):(i(),o(w,{key:1,class:"min-h-200px flex justify-center items-center"}))])),_:1})),[[B,t.loading]])])),_:1})}}),V={class:"cursor-pointer h-full px-2.5 flex justify-between items-center hover:bg-$hover-color mr-1 relative"},X={class:"mt-1px"},H={key:0,class:"flex border-t border-$n-divider-color"},K=s({__name:"index",setup(e){const{prefixCls:a}=$("header-notify"),s=h(j(P)),l=h(!1),p=h(0),v=b((()=>s.value.reduce(((t,e)=>t+e.list.filter((t=>!t.read)).length),0))),f=b((()=>({display:"flex",justifyContent:"center",minWidth:"6rem"}))),C=b((()=>({right:`-${v.value>9?6:1}px`}))),z=t=>{return e=this,a=null,i=function*(){const e=s.value[t];e.list.length>99||(l.value=!0,yield w(1e3),e.list.push(...P[t].list),l.value=!1)},new Promise(((t,s)=>{var l=t=>{try{r(i.next(t))}catch(e){s(e)}},o=t=>{try{r(i.throw(t))}catch(e){s(e)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,o);r((i=i.apply(e,a)).next())}));var e,a,i};return(e,h)=>{const j=t,b=A,w=M,T=E,D=B,G=N;return i(),n("div",{class:u([k(a),"h-full"])},[c(G,{trigger:"click",class:"!p-0",placement:"bottom"},{trigger:r((()=>[g("span",V,[c(j,{icon:"ant-design:bell-outlined",class:"text-$n-text-color"}),c(b,{value:v.value,show:v.value>0,class:"absolute top-1.5",style:x(C.value),max:99},null,8,["value","show","style"])])])),default:r((()=>[c(D,{value:p.value,"onUpdate:value":h[0]||(h[0]=t=>p.value=t),"tab-style":f.value,type:"line","justify-content":"space-evenly",class:"w-20rem"},{default:r((()=>[(i(!0),n(m,null,d(s.value,((t,e)=>(i(),o(T,{key:t.key,name:e},{tab:r((()=>[c(w,{size:3},{default:r((()=>[g("div",X,y(t.name),1),c(b,{value:t.list.filter((t=>!t.read)).length,type:t.badgeType,max:99,show:0!==t.list.length},null,8,["value","type","show"])])),_:2},1024)])),default:r((()=>[c(U,{list:t.list,loading:l.value},null,8,["list","loading"])])),_:2},1032,["name"])))),128))])),_:1},8,["value","tab-style"]),s.value[p.value].list.length>0?(i(),n("div",H,[g("div",{class:"py-3 text-center cursor-pointer flex-1",onClick:h[1]||(h[1]=t=>{return e=p.value,void(s.value[e].list=[]);var e})},"清空"),2!==p.value?(i(),n("div",{key:0,class:"py-3 text-center cursor-pointer flex-1 border-l border-$n-divider-color",onClick:h[2]||(h[2]=t=>z(p.value))},"查看更多")):_("",!0)])):_("",!0)])),_:1})],2)}}});export{K as default};
