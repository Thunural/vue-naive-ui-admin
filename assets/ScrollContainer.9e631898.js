var e;import{v as t,u as s,c8 as l,G as a,i as r,q as o,bR as n,ah as i,A as c,bs as u,w as v,c9 as d,p as f,R as p,V as _,a9 as m,ao as b,W as z,X as g,N as h,ae as w,af as y,bh as S,b6 as L,Y as B,ap as T,Z as x}from"./vendor.07696a3b.js";import{a as A,o as R,c as W}from"./componentSetting.58af93ba.js";import{R as C,p as H,m as k}from"./index.3471ac16.js";function E({el:e,to:l,duration:a=500,callback:r}){const o=t(!1),n=(e=>e.scrollTop)(e),i=l-n;let c=0;a=C(a)?500:a;const u=function(){if(!s(o))return;c+=20;const t=(l=c,v=n,d=i,(l/=a/2)<1?d/2*l*l+v:-d/2*(--l*(l-2)-1)+v);var l,v,d;((e,t)=>{e.scrollTop=t})(e,t),c<a&&s(o)?requestAnimationFrame(u):r&&H(r)&&r()};return{start:()=>{o.value=!0,u()},stop:()=>{o.value=!1}}}const M="undefined"==typeof window;function X(e){for(const t of e){const e=t.target.__resizeListeners__||[];e.length&&e.forEach((e=>{e()}))}}function Y(e,t){M||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new l(X),e.__ro__.observe(e)),e.__resizeListeners__.push(t))}function $(e,t){e&&e.__resizeListeners__&&(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||e.__ro__.disconnect())}const j={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function O({move:e,size:t,bar:s}){const l={},a=`translate${s.axis}(${e}%)`;return l[s.size]=t,l.transform=a,l.msTransform=a,l.webkitTransform=a,l}var q=a({name:"Bar",props:{vertical:Boolean,size:String,move:Number},setup(e){const s=c(),l=t(),a=r("scroll-bar-wrap",{}),u=o((()=>j[e.vertical?"vertical":"horizontal"])),v=t({}),d=t(),f=e=>{var t;e.ctrlKey||2===e.button||(null==(t=window.getSelection())||t.removeAllRanges(),_(e),v.value[u.value.axis]=e.currentTarget[u.value.offset]-(e[u.value.client]-e.currentTarget.getBoundingClientRect()[u.value.direction]))},p=e=>{var t;const r=100*(Math.abs(e.target.getBoundingClientRect()[u.value.direction]-e[u.value.client])-l.value[u.value.offset]/2)/(null==(t=null==s?void 0:s.vnode.el)?void 0:t[u.value.offset]);a.value[u.value.scroll]=r*a.value[u.value.scrollSize]/100},_=e=>{e.stopImmediatePropagation(),d.value=!0,R(document,"mousemove",m),R(document,"mouseup",b),document.onselectstart=()=>!1},m=e=>{var t,r;if(!1===d.value)return;const o=v.value[u.value.axis];if(!o)return;const n=100*(-1*((null==(t=null==s?void 0:s.vnode.el)?void 0:t.getBoundingClientRect()[u.value.direction])-e[u.value.client])-(l.value[u.value.offset]-o))/(null==(r=null==s?void 0:s.vnode.el)?void 0:r[u.value.offset]);a.value[u.value.scroll]=n*a.value[u.value.scrollSize]/100};function b(){d.value=!1,v.value[u.value.axis]=0,A(document,"mousemove",m),document.onselectstart=null}return n((()=>{A(document,"mouseup",b)})),()=>i("div",{class:["scrollbar__bar","is-"+u.value.key],onMousedown:p},i("div",{ref:l,class:"scrollbar__thumb",onMousedown:f,style:O({size:e.size,move:e.move,bar:u.value})}))}});const{scrollbar:D}=W,N=a({name:"Scrollbar",components:{Bar:q},props:{native:{type:Boolean,default:null!=(e=null==D?void 0:D.native)&&e},wrapStyle:{type:[String,Array],default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array],default:""},noresize:Boolean,tag:{type:String,default:"div"},tabs:{type:Boolean,default:!1}},setup(e){const l=t("0"),a=t("0"),r=t(0),n=t(0),i=t(),c=t();f("scroll-bar-wrap",i);const p=o((()=>Array.isArray(e.wrapStyle)?function(e){const t={};for(let a=0;a<e.length;a++)e[a]&&(s=t,l=e[a],Object.assign(s,l));var s,l;return t}(e.wrapStyle):e.wrapStyle)),_=()=>{if(!s(i))return;const e=100*s(i).clientHeight/s(i).scrollHeight,t=100*s(i).clientWidth/s(i).scrollWidth;a.value=e<100?e+"%":"",l.value=t<100?t+"%":""};return u((()=>{e.native||(v(_),e.noresize||(Y(s(c),_),Y(s(i),_),addEventListener("resize",_)),e.tabs&&function(){const e=s(i);function t(t){const s=t.wheelDelta||t.detail;let l=0;l=1==s||s<0&&-1!=s?20*1:20*-1,e.scrollLeft+=l}e.addEventListener("mousewheel",t,!1)||e.addEventListener("DOMMouseScroll",t,!1)}())})),d((()=>{e.native||e.noresize||($(s(c),_),$(s(i),_),removeEventListener("resize",_))})),{moveX:r,moveY:n,sizeWidth:l,sizeHeight:a,style:p,wrap:i,resize:c,update:_,handleScroll:()=>{e.native||(n.value=100*s(i).scrollTop/s(i).clientHeight,r.value=100*s(i).scrollLeft/s(i).clientWidth)}}}}),F={class:"scrollbar"};var G=k(N,[["render",function(e,t,s,l,a,r){const o=p("bar");return _(),m("div",F,[b("div",{ref:"wrap",class:w([e.wrapClass,"scrollbar__wrap",e.native?"":"scrollbar__wrap--hidden-default"]),style:y(e.style),onScroll:t[0]||(t[0]=(...t)=>e.handleScroll&&e.handleScroll(...t))},[(_(),z(S(e.tag),{ref:"resize",class:w(["scrollbar__view",e.viewClass]),style:y(e.viewStyle)},{default:g((()=>[h(e.$slots,"default")])),_:3},8,["class","style"]))],38),e.native?T("",!0):(_(),m(L,{key:0},[B(o,{move:e.moveX,size:e.sizeWidth},null,8,["move","size"]),B(o,{vertical:"",move:e.moveY,size:e.sizeHeight},null,8,["move","size"])],64))])}]]);var I=k(a({name:"ScrollContainer",components:{Scrollbar:G},props:{isTabs:{type:Boolean,default:!1}},setup(e){const l=t(null);return{tabs:e.isTabs,scrollbarRef:l,scrollTo:function(e,t=500){const a=s(l);a&&v((()=>{const l=s(a.wrap);if(!l)return;const{start:r}=E({el:l,to:e,duration:t});r()}))},scrollBottom:function(){const e=s(l);e&&v((()=>{const t=s(e.wrap);if(!t)return;const l=t.scrollHeight,{start:a}=E({el:t,to:l});a()}))},getScrollWrap:function(){const e=s(l);return e?e.wrap:null}}}}),[["render",function(e,t,s,l,a,r){const o=G;return _(),z(o,x({ref:"scrollbarRef",class:"scroll-container",tabs:e.tabs},e.$attrs),{default:g((()=>[h(e.$slots,"default")])),_:3},16,["tabs"])}]]);export{I as _,E as u};
